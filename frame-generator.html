<!DOCTYPE html>
<html lang="bn" class="dark">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=5.0, user-scalable=yes">
    
    <!-- Primary Meta Tags -->
    <title>দাঁড়িপাল্লা প্রোফাইল ফ্রেম তৈরি করুন | আনোয়ার ছিদ্দিক চৌধুরী</title>
    <meta name="title" content="দাঁড়িপাল্লা প্রোফাইল ফ্রেম তৈরি করুন | আনোয়ার ছিদ্দিক চৌধুরী">
    <meta name="description" content="দাঁড়িপাল্লায় ভোট দিন - প্রোফাইল ফ্রেম জেনারেটর। ছবি আপলোড করে ফ্রেম যুক্ত করুন, ডাউনলোড করুন ও ফেসবুকে শেয়ার করুন, সহজ ও নিরাপদভাবে।">
    <meta name="keywords" content="দাঁড়িপাল্লা, ভোট, বাংলাদেশ, প্রোফাইল ফ্রেম, ফ্রেম তৈরি, ফ্রেম এডিটর, ভোট ফ্রেম">
    <meta name="author" content="anwarsiddique.info.bd">
    <meta name="robots" content="index, follow">
    <meta name="language" content="Bengali">
    
    <!-- Favicon -->
    <link rel="icon" type="image/png" href="PhotoOfAnwarSiddique2.svg">
    <link rel="apple-touch-icon" href="PhotoOfAnwarSiddique2.svg">
    <link rel="shortcut icon" href="PhotoOfAnwarSiddique2.svg">
    
    <!-- Open Graph / Telegram / Facebook -->
    <meta property="og:type" content="website">
    <meta property="og:url" content="https://anwarsiddique.info.bd/frame-generator">
    <meta property="og:title" content="দাঁড়িপাল্লা প্রোফাইল ফ্রেম তৈরি করুন | আনোয়ার ছিদ্দিক চৌধুরী">
    <meta property="og:description" content="দাঁড়িপাল্লায় ভোট দিন - প্রোফাইল ফ্রেম জেনারেটর। ছবি আপলোড করে ফ্রেম যুক্ত করুন, ডাউনলোড করুন ও ফেসবুকে শেয়ার করুন, সহজ ও নিরাপদভাবে।">
    <meta property="og:image" content="PhotoOfAnwarSiddique2.svg">
    <meta property="og:image:width" content="1200">
    <meta property="og:image:height" content="630">
    <meta property="og:image:alt" content="দাঁড়িপাল্লায় ভোট দিন">
    <meta property="og:locale" content="bn_BD">
    <meta property="og:site_name" content="দাঁড়িপাল্লা">
    
    <!-- Twitter -->
    <meta property="twitter:card" content="summary_large_image">
    <meta property="twitter:url" content="https://anwarsiddique.info.bd/frame-generator">
    <meta property="twitter:title" content="দাঁড়িপাল্লা প্রোফাইল ফ্রেম তৈরি করুন | আনোয়ার ছিদ্দিক চৌধুরী">
    <meta property="twitter:description" content="দাঁড়িপাল্লায় ভোট দিন - প্রোফাইল ফ্রেম জেনারেটর। ছবি আপলোড করে ফ্রেম যুক্ত করুন, ডাউনলোড করুন ও ফেসবুকে শেয়ার করুন, সহজ ও নিরাপদভাবে।">
    <meta property="twitter:image" content="PhotoOfAnwarSiddique2.svg">
    <meta property="twitter:image:alt" content="দাঁড়িপাল্লায় ভোট দিন">
    
    <!-- Additional SEO -->
    <meta name="theme-color" content="#16a34a">
    <meta name="msapplication-TileColor" content="#16a34a">
    <link rel="canonical" href="https://anwarsiddique.info.bd/frame-generator">
    
    <!-- Enhanced SEO Meta Tags -->
<meta name="keywords" content="দাঁড়িপাল্লা, দাঁড়িপাল্লায় ভোট দিন, আনোয়ার ছিদ্দিক চৌধুরী, জামায়াত-ই-ইসলামী বাংলাদেশ, ইসলামী আন্দোলন বাংলাদেশ, ইসলামী রাজনীতি, বাংলাদেশ রাজনীতি, ভোট ফ্রেম, প্রোফাইল ফ্রেম, ছবি এডিট, ফ্রেম জেনারেটর, নির্বাচনী প্রচারণা, চট্টগ্রাম-৪ আসন, সংসদ সদস্যপ্রার্থী, ইসলামী শাসনতন্ত্র, ইসলামী সমাজব্যবস্থা">

<!-- Additional Structured Data for Google -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "WebApplication",
  "name": "দাঁড়িপাল্লায় ভোট দিন - প্রোফাইল ফ্রেম জেনারেটর",
  "description": "ইসলামী শাসনতন্ত্রের ভিত্তিতে রাষ্ট্র পরিচালনার জন্য জামায়াত-ই-ইসলামীর প্রার্থী আনোয়ার ছিদ্দিক চৌধুরীর নির্বাচনী প্রোফাইল ফ্রেম তৈরি করুন।",
  "url": "https://anwarsiddique.info.bd/frame-generator",
  "applicationCategory": "MultimediaApplication",
  "operatingSystem": "Any",
  "author": {
    "@type": "Organization",
    "name": "দাঁড়িপাল্লা"
  },
  "offers": {
    "@type": "Offer",
    "price": "0",
    "priceCurrency": "BDT"
  }
}

// Firebase configuration for visitor counter
const firebaseConfig = {
    apiKey: "AIzaSyB_EXAMPLE_KEY",
    authDomain: "daripalla-frame-generator.firebaseapp.com",
    databaseURL: "https://daripalla-frame-generator-default-rtdb.firebaseio.com",
    projectId: "daripalla-frame-generator",
    storageBucket: "daripalla-frame-generator.appspot.com",
    messagingSenderId: "1234567890",
    appId: "1:1234567890:web:abcdef1234567890"
};

// Initialize Firebase and visitor counter
let visitorCount = 0;
try {
    firebase.initializeApp(firebaseConfig);
    const database = firebase.database();
    const visitorRef = database.ref('visitors');
    
    // Get current visitor count
    visitorRef.once('value').then((snapshot) => {
        visitorCount = snapshot.val() || 0;
        document.getElementById('visitorCounter').textContent = 
            visitorCount.toLocaleString('bn-BD');
    });
    
    // Increment visitor count
    visitorRef.transaction((currentCount) => {
        return (currentCount || 0) + 1;
    });
} catch (error) {
    console.log('Firebase not configured, using mock visitor count');
    // Mock visitor count for demo
    const mockCount = Math.floor(Math.random() * 10000) + 5000;
    document.getElementById('visitorCounter').textContent = 
        mockCount.toLocaleString('bn-BD');
}

// Social Sharing Functions
function shareOnFacebook() {
    if (!userImageObj) {
        showToast('দয়া করে প্রথমে একটি ছবি তৈরি করুন', 'error');
        return;
    }
    
    fabricCanvas.getElement().toBlob(function(blob) {
        const file = new File([blob], "daripalla_frame.png", {type: "image/png"});
        const formData = new FormData();
        formData.append('file', file);
        
        // Note: Facebook direct upload requires server-side implementation
        // For now, we'll use download and manual share
        showToast('ছবি ডাউনলোড করুন এবং ম্যানুয়ালি শেয়ার করুন', 'info');
        
        // Alternative: Open Facebook share dialog
        const shareURL = 'https://anwarsiddique.info.bd/frame-generator';
        const shareText = 'দাঁড়িপাল্লায় ভোট দিন - ইসলামী শাসনতন্ত্রের জন্য';
        window.open(`https://www.facebook.com/sharer/sharer.php?u=${encodeURIComponent(shareURL)}&quote=${encodeURIComponent(shareText)}`, '_blank');
    });
}

function shareOnTwitter() {
    const shareText = 'দাঁড়িপাল্লায় ভোট দিন - ইসলামী শাসনতন্ত্রের জন্য #দাঁড়িপাল্লা #জামায়াত #ইসলামী_শাসনতন্ত্র';
    const shareURL = 'https://anwarsiddique.info.bd/frame-generator';
    window.open(`https://twitter.com/intent/tweet?text=${encodeURIComponent(shareText)}&url=${encodeURIComponent(shareURL)}`, '_blank');
}

// Image Effects Function
function applyEffect() {
    if (!userImageObj) {
        showToast('দয়া করে প্রথমে একটি ছবি নির্বাচন করুন', 'error');
        return;
    }
    
    const effectType = document.getElementById('effectSelector').value;
    
    fabricCanvas.remove(userImageObj);
    
    // Apply selected effect
    const filters = [];
    switch(effectType) {
        case 'brightness':
            filters.push(new fabric.Image.filters.Brightness({ brightness: 0.1 }));
            break;
        case 'contrast':
            filters.push(new fabric.Image.filters.Contrast({ contrast: 0.1 }));
            break;
        case 'sepia':
            filters.push(new fabric.Image.filters.Sepia());
            break;
        case 'grayscale':
            filters.push(new fabric.Image.filters.Grayscale());
            break;
        default:
            // No effect
            break;
    }
    
    userImageObj.filters = filters;
    userImageObj.applyFilters();
    
    fabricCanvas.add(userImageObj);
    if (frameImageObj) {
        fabricCanvas.bringToFront(frameImageObj);
    }
    
    fabricCanvas.renderAll();
    showToast('ইফেক্ট প্রয়োগ করা হয়েছে!', 'success');
}

// Auto-save to localStorage
function autoSave() {
    if (userImageObj) {
        const state = {
            imageData: fabricCanvas.toDataURL(),
            zoom: zoomSlider.value,
            selectedFrame: currentFrame
        };
        localStorage.setItem('daripalla_frame_state', JSON.stringify(state));
    }
}

// Load auto-saved state
function loadSavedState() {
    const saved = localStorage.getItem('daripalla_frame_state');
    if (saved) {
        try {
            const state = JSON.parse(saved);
            if (state.imageData) {
                loadImage(state.imageData);
                setTimeout(() => {
                    zoomSlider.value = state.zoom;
                    handleZoom({target: zoomSlider});
                    
                    if (state.selectedFrame) {
                        document.querySelectorAll('.frame-option').forEach(el => {
                            if (el.dataset.frame === state.selectedFrame) {
                                selectFrame(el, state.selectedFrame);
                            }
                        });
                    }
                }, 500);
                
                showToast('আপনার শেষ অবস্থা লোড করা হয়েছে', 'info');
            }
        } catch (e) {
            console.log('No saved state found');
        }
    }
}

// Enhanced initialization with auto-save
function enhancedInit() {
    init(); // Call original init
    
    // Load saved state
    setTimeout(loadSavedState, 1000);
    
    // Auto-save every 30 seconds
    setInterval(autoSave, 30000);
    
    // Auto-save on user actions
    ['click', 'touchmove', 'touchend'].forEach(event => {
        previewCanvas.addEventListener(event, () => {
            setTimeout(autoSave, 1000);
        });
    });
}

// Replace original init call
window.addEventListener('DOMContentLoaded', enhancedInit);

// Enhanced download with auto-increment filename
function enhancedDownloadImage() {
    if (!userImageObj) {
        showToast('দয়া করে আগে একটি ছবি নির্বাচন করুন।', 'error');
        return;
    }

    showLoading(true);

    try {
        // Get download count
        let downloadCount = localStorage.getItem('daripalla_download_count') || 0;
        downloadCount = parseInt(downloadCount) + 1;
        localStorage.setItem('daripalla_download_count', downloadCount);
        
        // Update visitor counter locally
        visitorCount++;
        document.getElementById('visitorCounter').textContent = 
            visitorCount.toLocaleString('bn-BD');
        
        const filename = `দাঁড়িপাল্লা_ফ্রেম_${downloadCount}_${Date.now()}.png`;
        
        const link = document.createElement('a');
        link.download = filename;
        link.href = fabricCanvas.toDataURL({ format: 'png', quality: 1 });
        document.body.appendChild(link);
        link.click();
        document.body.removeChild(link);

        showToast(`ফ্রেম ডাউনলোড সম্পন্ন! মোট ডাউনলোড: ${downloadCount}`, 'success');
    } catch (error) {
        console.error('Export error:', error);
        showToast('ডাউনলোড করতে সমস্যা হয়েছে। আবার চেষ্টা করুন।', 'error');
    } finally {
        showLoading(false);
    }
}

// Replace original download function
downloadBtn.removeEventListener('click', downloadImage);
downloadBtn.addEventListener('click', enhancedDownloadImage);
</script>

<!-- Person Schema for Anwar Siddique Chowdhury -->
<script type="application/ld+json">
{
  "@context": "https://schema.org",
  "@type": "Person",
  "name": "আনোয়ার ছিদ্দিক চৌধুরী",
  "jobTitle": "সংসদ সদস্যপ্রার্থী",
  "description": "চট্টগ্রাম-৪ আসনের জামায়াতে ইসলামী ও ১১ দলীয় ঐক্যবদ্ধ বাংলাদেশ-এর প্রার্থীকে ইসলামী শাসন, ন্যায় ও ইনসাফের ভিত্তিতে রাষ্ট্র পরিচালনার জন্য দাঁড়িপাল্লায় ভোট দিন।",
  "affiliation": {
    "@type": "Organization",
    "name": "বাংলাদেশ জামায়াতে ইসলামী
  },
  "knowsAbout": ["ইসলামী রাজনীতি", "ইসলামী সমাজব্যবস্থা", "বাংলাদেশ রাজনীতি"],
  "url": "https://anwarsiddique.info.bd"
}
</script>

    <!-- Google Font -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Hind+Siliguri:wght@400;600;700&display=swap" rel="stylesheet">
    
    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- Font Awesome -->
    <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css" rel="stylesheet">
    
    <!-- Custom Fonts -->
    <style>
        @font-face {
            font-family: 'Shadhinata';
            src: url('Li Shadhinata 2.0 Unicode.ttf') format('truetype');
        }
        @font-face {
            font-family: 'Purno';
            src: url('BCC Purno Semibold.otf') format('opentype');
        }
        
        body {
            font-family: 'Purno', 'Hind Siliguri', sans-serif;
        }
        
        .font-shadhinata {
            font-family: 'Shadhinata', sans-serif;
        }
        
        h1, h2, h3, h4, h5, h6 {
            font-family: 'Shadhinata', sans-serif;
            font-weight: 700;
        }
    </style>
    
    <style>
        * {
            -webkit-tap-highlight-color: transparent;
        }
        
        /* Custom range slider */
        input[type="range"] {
            -webkit-appearance: none;
            appearance: none;
            background: #16a34a;
            height: 8px;
            border-radius: 4px;
            cursor: pointer;
            outline: none;
        }
        
        input[type="range"]::-webkit-slider-track {
            background: #16a34a;
            height: 8px;
            border-radius: 4px;
        }
        
        input[type="range"]::-webkit-slider-thumb {
            -webkit-appearance: none;
            appearance: none;
            background: #16a34a;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            margin-top: -6px;
        }
        
        input[type="range"]::-moz-range-track {
            background: #16a34a;
            height: 8px;
            border-radius: 4px;
        }
        
        input[type="range"]::-moz-range-thumb {
            background: #16a34a;
            height: 20px;
            width: 20px;
            border-radius: 50%;
            border: 2px solid white;
            box-shadow: 0 2px 4px rgba(0, 0, 0, 0.2);
            cursor: pointer;
        }
        
        /* Preview canvas */
        #previewCanvas {
            width: 100% !important;
            height: 100% !important;
            max-width: 100%;
            display: block;
            touch-action: none;
        }
        
        /* Fabric.js canvas wrapper */
        .canvas-container {
            width: 100% !important;
            height: 100% !important;
            max-width: 100%;
            position: relative;
        }
        
        .canvas-container canvas {
            max-width: 100% !important;
            height: auto !important;
        }
        
        /* Frame option */
        .frame-option {
            position: relative;
            width: 100px;
            height: 100px;
            min-width: 100px;
            border-radius: 0.75rem;
            overflow: hidden;
            cursor: pointer;
            border: 3px solid transparent;
            transition: all 0.2s ease;
            background: #f3f4f6;
            touch-action: manipulation;
            flex-shrink: 0;
        }
        
        .frame-option:hover {
            transform: scale(1.05);
            border-color: #16a34a;
        }
        
        .frame-option:active {
            transform: scale(0.95);
        }
        
        .frame-option.selected {
            border-color: #D3342D;
            box-shadow: 0 0 0 3px rgba(211, 52, 45, 0.2);
        }
        
        .frame-option img {
            width: 100%;
            height: 100%;
            object-fit: cover;
        }
        
        /* Toast */
        .toast {
            position: fixed;
            bottom: 24px;
            left: 50%;
            transform: translateX(-50%) translateY(100px);
            background: rgba(15, 23, 42, 0.95);
            color: white;
            padding: 16px 24px;
            border-radius: 0.75rem;
            box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1), 0 4px 6px -4px rgba(0, 0, 0, 0.1);
            font-size: 14px;
            font-weight: 600;
            z-index: 1000;
            max-width: 90%;
            transition: transform 0.3s ease;
        }
        
        .toast.show {
            transform: translateX(-50%) translateY(0);
        }
        
        .toast.error {
            background: rgba(220, 38, 38, 0.95);
        }
        
        .toast.success {
            background: rgba(34, 197, 94, 0.95);
        }
        
        /* Loading spinner */
        .spinner {
            border: 3px solid rgba(255, 255, 255, 0.3);
            border-top: 3px solid white;
            border-radius: 50%;
            width: 40px;
            height: 40px;
            animation: spin 1s linear infinite;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
        
        input[type="file"] {
            display: none;
        }
        
        /* Dark mode support */
        .dark .frame-option {
            background: #374151;
        }
        
        .dark input[type="range"] {
            background: #374151;
        }
        
        .dark input[type="range"]::-webkit-slider-track {
            background: #374151;
        }
        
        .dark input[type="range"]::-webkit-slider-thumb {
            background: #D3342D;
        }
        
        /* Mobile optimizations */
        @media (max-width: 640px) {
            .frame-option {
                width: 85px;
                height: 85px;
                min-width: 85px;
            }
        }
    </style>
    <style>
        /* Enhanced Mobile Responsiveness */
@media (max-width: 640px) {
    .frame-option {
        width: 75px;
        height: 75px;
        min-width: 75px;
    }
    
    .canvas-container canvas {
        max-width: 95vw !important;
        max-height: 95vw !important;
    }
    
    #previewContainer {
        width: 95vw;
        height: 95vw;
        margin: 0 auto;
    }
    
    h1 {
        font-size: 1.75rem !important;
        line-height: 2rem !important;
    }
    
    .grid-cols-1 {
        grid-template-columns: 1fr !important;
    }
    
    /* Mobile touch-friendly buttons */
    button, .frame-option, input[type="range"] {
        min-height: 44px; /* Apple's recommended touch target size */
    }
    
    .mobile-hidden {
        display: none !important;
    }
    
    .mobile-show {
        display: block !important;
    }
    
    /* Better spacing for mobile */
    .container {
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }
    
    /* Adjust font sizes for mobile */
    .text-sm-mobile {
        font-size: 0.875rem !important;
    }
    
    .text-base-mobile {
        font-size: 1rem !important;
    }
}

/* Tablet Responsiveness */
@media (min-width: 641px) and (max-width: 1024px) {
    .frame-option {
        width: 90px;
        height: 90px;
        min-width: 90px;
    }
    
    #previewContainer {
        width: 90vw;
        height: 90vw;
        max-width: 600px;
        margin: 0 auto;
    }
}

/* Prevent text selection on touch devices */
.no-select {
    -webkit-touch-callout: none;
    -webkit-user-select: none;
    -khtml-user-select: none;
    -moz-user-select: none;
    -ms-user-select: none;
    user-select: none;
}

/* Improved touch scrolling for frame selection */
#framesGrid {
    -webkit-overflow-scrolling: touch;
    scrollbar-width: none; /* Firefox */
}

#framesGrid::-webkit-scrollbar {
    display: none; /* Chrome, Safari, Opera */
}

/* Mobile loading optimization */
.mobile-loading {
    background-size: 50% auto;
}
    </style>

    <style>
        /* Enhanced Mobile Responsiveness */
@media (max-width: 640px) {
    .container {
        padding-left: 0.75rem !important;
        padding-right: 0.75rem !important;
    }
    
    .frame-option {
        width: 70px;
        height: 70px;
        min-width: 70px;
    }
    
    .aspect-square {
        aspect-ratio: 1 / 1;
    }
    
    /* Touch-friendly elements */
    button, .frame-option {
        min-height: 44px;
        -webkit-tap-highlight-color: rgba(211, 52, 45, 0.3);
    }
    
    input[type="range"] {
        min-height: 24px;
    }
    
    /* Hide scrollbar but keep functionality */
    .scrollbar-hide {
        -ms-overflow-style: none;
        scrollbar-width: none;
    }
    
    .scrollbar-hide::-webkit-scrollbar {
        display: none;
    }
    
    /* Better text readability */
    h1, h2, h3 {
        line-height: 1.2 !important;
    }
    
    /* Reduce spacing on mobile */
    .space-y-4 > * + * {
        margin-top: 1rem;
    }
}

@media (min-width: 641px) and (max-width: 768px) {
    .frame-option {
        width: 85px;
        height: 85px;
        min-width: 85px;
    }
    
    .container {
        padding-left: 1rem !important;
        padding-right: 1rem !important;
    }
}

/* Tablet Optimizations */
@media (min-width: 769px) and (max-width: 1024px) {
    .frame-option {
        width: 95px;
        height: 95px;
        min-width: 95px;
    }
    
    .grid-cols-2 {
        grid-template-columns: repeat(2, minmax(0, 1fr)) !important;
    }
}

/* Touch Manipulation */
.touch-manipulation {
    touch-action: manipulation;
}

/* Improve focus states for accessibility */
button:focus, 
.frame-option:focus,
input[type="range"]:focus {
    outline: 2px solid #D3342D;
    outline-offset: 2px;
}

/* Mobile-optimized canvas */
@media (max-width: 1024px) {
    #previewContainer {
        width: 100%;
        height: auto;
        max-width: 500px;
        margin: 0 auto;
    }
    
    #previewCanvas {
        touch-action: pan-x pan-y pinch-zoom;
    }
}
    </style>
    
    <!-- Fabric.js Library -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/4.6.0/fabric.min.js"></script>
    
    <!-- Firebase SDK -->
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-analytics-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
    <style>
        /* Additional styles can go here */
    </style>
</head>
<body class="dark:bg-slate-900 dark:text-white bg-gray-50">
    
    <!-- Navigation Bar - Same as main site -->
    <nav id="navbar" class="fixed w-full z-50 transition-all duration-300 py-3 md:py-4 bg-white/95 dark:bg-slate-900/95 backdrop-blur-md shadow-lg border-b border-gray-200 dark:border-slate-800">
        <div class="container mx-auto px-4 md:px-6 flex justify-between items-center">
            <!-- Logo and Branding -->
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 md:w-12 md:h-12 rounded-full flex items-center justify-center shadow-lg overflow-hidden bg-transparent">
                    <img src="Logo_Big.gif" alt="Logo" class="w-full h-full object-cover">
                </div>
                <div class="hidden sm:block">
                    <p id="nav-name" class="font-light text-lg md:text-xl leading-none dark:text-white text-slate-900 transition-colors font-shadhinata">আনোয়ার ছিদ্দিক চৌধুরী</p>
                    <p id="nav-sub" class="text-[11px] md:text-[12px] font-light uppercase tracking-widest mt-0.5 dark:text-yellow-300 text-yellow-700 transition-colors">
                        সংসদ সদস্যপ্রার্থী, চট্টগ্রাম-৪
                    </p>
                </div>
                
                <!-- Mobile Title -->
                <div class="sm:hidden">
                    <p id="nav-name" class="font-light text-sm leading-none dark:text-white text-slate-900 transition-colors font-shadhinata">আনোয়ার ছিদ্দিক চৌধুরী</p>
                    <p id="nav-sub" class="text-[10px] font-light uppercase tracking-widest mt-0.5 dark:text-yellow-300 text-yellow-700 transition-colors">
                        সংসদ সদস্যপ্রার্থী, চট্টগ্রাম-৪
                    </p>
                </div>
            </div>

            <!-- Back to Home Button -->
            <div class="flex items-center gap-2">
                <a href="index.html" 
                   class="bg-gradient-to-r from-[#D3342D] to-red-600 px-4 md:px-6 py-2 md:py-3 rounded-full font-light text-white text-sm md:text-base shadow-xl hover:from-red-600 hover:to-[#D3342D] active:scale-95 transition-all whitespace-nowrap flex items-center gap-2">
                    <i class="fas fa-home"></i>
                    <span class="hidden sm:inline">মূল পেইজে ফিরুন</span>
                    <span class="sm:hidden">হোম</span>
                </a>
            </div>
        </div>
    </nav>

<!-- Main Content -->
<main class="pt-16 md:pt-20 lg:pt-24 pb-8 md:pb-12">
    <div class="container mx-auto px-3 md:px-4 lg:px-6">
        <!-- Header -->
        <div class="text-center mb-6 md:mb-8 lg:mb-12 px-2">
            <h1 class="text-2xl sm:text-3xl md:text-4xl lg:text-5xl font-light mb-3 md:mb-4 dark:text-white text-slate-900 font-shadhinata leading-tight">
                প্রোফাইল ফ্রেম তৈরি করুন
            </h1>
            <p class="text-sm sm:text-base md:text-lg lg:text-xl dark:text-gray-300 text-gray-600 max-w-2xl mx-auto px-2">
                আপনার ছবিতে "দাঁড়িপাল্লায় ভোট দিন" ফ্রেম যোগ করুন এবং সোশ্যাল মিডিয়ায় শেয়ার করুন
            </p>
        </div>

        <div class="max-w-6xl mx-auto">
            <div class="grid grid-cols-1 lg:grid-cols-3 gap-4 md:gap-6 lg:gap-8">
                <!-- Left Column: Frame Selection -->
                <div class="lg:col-span-1 order-2 lg:order-1">
                    <div class="bg-white dark:bg-slate-800 rounded-xl md:rounded-2xl shadow-lg p-3 md:p-4 lg:p-6 mb-4 md:mb-6">
                        <h2 class="text-lg md:text-xl font-light mb-3 md:mb-4 dark:text-white text-slate-900 font-shadhinata">
                            ফ্রেম নির্বাচন করুন
                        </h2>
                        
                        <!-- Frame Selection Scroll Container -->
                        <div class="relative mb-3">
                            <div class="flex gap-2 md:gap-3 overflow-x-auto pb-3 md:pb-4 scrollbar-hide" id="framesGrid">
                                <!-- Frames will be loaded here -->
                            </div>
                            <!-- Scroll hint for mobile -->
                            <div class="lg:hidden text-xs text-gray-500 dark:text-gray-400 text-center mt-2">
                                <i class="fas fa-arrow-right mr-1"></i> সাইডে স্ক্রোল করুন
                            </div>
                        </div>
                        
                        <!-- Instructions -->
                        <div class="mt-4 md:mt-6 p-3 md:p-4 bg-blue-50 dark:bg-blue-900/20 rounded-lg">
                            <h3 class="font-medium text-blue-700 dark:text-blue-300 mb-2 flex items-center gap-2">
                                <i class="fas fa-info-circle text-sm md:text-base"></i>
                                <span class="text-sm md:text-base">কিভাবে ব্যবহার করবেন</span>
                            </h3>
                            <ol class="text-xs md:text-sm text-gray-600 dark:text-gray-400 space-y-1.5 md:space-y-2 pl-1">
                                <li class="flex items-start">
                                    <span class="min-w-[20px]">১.</span>
                                    <span>উপরের ফ্রেম নির্বাচন করুন</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="min-w-[20px]">২.</span>
                                    <span>ছবি আপলোড করুন</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="min-w-[20px]">৩.</span>
                                    <span>জুম ও পজিশন ঠিক করুন</span>
                                </li>
                                <li class="flex items-start">
                                    <span class="min-w-[20px]">৪.</span>
                                    <span>ডাউনলোড বাটনে ক্লিক করুন</span>
                                </li>
                            </ol>
                        </div>

                        <!-- Mobile Quick Actions -->
                        <div class="lg:hidden mt-4 p-3 bg-green-50 dark:bg-green-900/20 rounded-lg">
                            <h3 class="font-medium text-green-700 dark:text-green-300 mb-2 text-sm">
                                <i class="fas fa-mobile-alt mr-2"></i> মোবাইলে ব্যবহারের টিপস
                            </h3>
                            <ul class="text-xs text-gray-600 dark:text-gray-400 space-y-1">
                                <li>• ছবি স্পর্শ করে সরাতে পারেন</li>
                                <li>• দুই আঙ্গুলে ছড়িয়ে জুম করতে পারেন</li>
                                <li>• ফ্রেম নির্বাচনে ট্যাপ করুন</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <!-- Middle Column: Canvas -->
                <div class="lg:col-span-2 order-1 lg:order-2">
                    <div class="bg-white dark:bg-slate-800 rounded-xl md:rounded-2xl shadow-lg p-3 md:p-4 lg:p-6">
                        <!-- Canvas Container -->
                        <div class="relative w-full aspect-square rounded-lg md:rounded-xl overflow-hidden mb-4 md:mb-6 border border-gray-200 dark:border-slate-700"
                             id="previewContainer"
                             style="background-color: #f5f5f5; background-image: linear-gradient(45deg, #e0e0e0 25%, transparent 25%), linear-gradient(-45deg, #e0e0e0 25%, transparent 25%), linear-gradient(45deg, transparent 75%, #e0e0e0 75%), linear-gradient(-45deg, transparent 75%, #e0e0e0 75%); background-size: 20px 20px; background-position: 0 0, 0 10px, 10px -10px, -10px 0px;">
                            <canvas id="previewCanvas" width="1080" height="1080"></canvas>
                            <div class="hidden absolute inset-0 bg-black/80 flex flex-col items-center justify-center text-white rounded-lg md:rounded-xl" id="loadingIndicator">
                                <div class="spinner mb-3 md:mb-4"></div>
                                <div class="font-semibold text-sm md:text-base">প্রসেস করা হচ্ছে...</div>
                            </div>
                            
                            <!-- Mobile Touch Hints -->
                            <div class="lg:hidden absolute bottom-3 left-3 right-3 flex justify-between pointer-events-none">
                                <div class="bg-black/50 text-white text-xs px-2 py-1 rounded-full">
                                    <i class="fas fa-hand-pointer mr-1"></i> ছবি সরান
                                </div>
                                <div class="bg-black/50 text-white text-xs px-2 py-1 rounded-full">
                                    <i class="fas fa-expand-alt mr-1"></i> জুম করুন
                                </div>
                            </div>
                        </div>

                        <!-- Controls -->
                        <div class="space-y-4 md:space-y-6">
                            <!-- Zoom Slider -->
                            <div class="px-1">
                                <div class="flex items-center justify-between mb-2">
                                    <label class="text-sm md:text-base font-medium dark:text-gray-300 text-gray-700 flex items-center">
                                        <i class="fas fa-search mr-2 text-xs md:text-sm"></i>
                                        <span class="text-xs md:text-sm">জুম কন্ট্রোল</span>
                                    </label>
                                    <span class="text-xs md:text-sm font-bold text-green-600 dark:text-green-400" id="zoomValue">100%</span>
                                </div>
                                <div class="relative">
                                    <input type="range" 
                                           id="zoomSlider" 
                                           min="50" 
                                           max="300" 
                                           value="100" 
                                           class="w-full h-2 md:h-2.5">
                                    <!-- Slider markers -->
                                    <div class="flex justify-between text-xs text-gray-500 dark:text-gray-400 mt-1 px-1">
                                        <span>50%</span>
                                        <span>150%</span>
                                        <span>300%</span>
                                    </div>
                                </div>
                            </div>

                            <!-- Action Buttons -->
                            <div class="grid grid-cols-1 sm:grid-cols-2 gap-3 md:gap-4">
                                <button type="button" 
                                        id="selectImageBtn"
                                        class="w-full bg-gradient-to-r from-blue-500 to-blue-600 hover:from-blue-600 hover:to-blue-700 text-white font-medium py-2.5 md:py-3 px-4 md:px-6 rounded-lg md:rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center gap-2 active:scale-95 touch-manipulation min-h-[48px]">
                                    <i class="fas fa-cloud-upload-alt text-base md:text-lg"></i>
                                    <span class="text-sm md:text-base">ছবি আপলোড করুন</span>
                                </button>
                                
                                <button type="button" 
                                        id="changeImageBtn"
                                        class="w-full hidden bg-gradient-to-r from-gray-500 to-gray-600 hover:from-gray-600 hover:to-gray-700 text-white font-medium py-2.5 md:py-3 px-4 md:px-6 rounded-lg md:rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center gap-2 active:scale-95 touch-manipulation min-h-[48px]">
                                    <i class="fas fa-sync-alt text-base md:text-lg"></i>
                                    <span class="text-sm md:text-base">ছবি পরিবর্তন</span>
                                </button>
                                
                                <button type="button" 
                                        id="downloadBtn"
                                        class="w-full col-span-1 sm:col-span-2 bg-gradient-to-r from-[#D3342D] to-red-600 hover:from-red-600 hover:to-[#D3342D] text-white font-bold py-3 md:py-4 px-4 md:px-6 rounded-lg md:rounded-xl shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center gap-2 active:scale-95 touch-manipulation min-h-[56px]">
                                    <i class="fas fa-download text-lg md:text-xl"></i>
                                    <span class="text-base md:text-lg">ফ্রেম ডাউনলোড করুন</span>
                                </button>
                            </div>

                            <!-- Additional Mobile Controls -->
                            <div class="lg:hidden grid grid-cols-2 gap-3">
                                <button type="button" 
                                        onclick="resetImage()"
                                        class="w-full bg-gradient-to-r from-gray-400 to-gray-500 hover:from-gray-500 hover:to-gray-600 text-white font-medium py-2.5 px-4 rounded-lg shadow flex items-center justify-center gap-2 active:scale-95 touch-manipulation">
                                    <i class="fas fa-redo text-sm"></i>
                                    <span class="text-sm">রিসেট করুন</span>
                                </button>
                                
                                <button type="button" 
                                        onclick="centerImage()"
                                        class="w-full bg-gradient-to-r from-indigo-500 to-indigo-600 hover:from-indigo-600 hover:to-indigo-700 text-white font-medium py-2.5 px-4 rounded-lg shadow flex items-center justify-center gap-2 active:scale-95 touch-manipulation">
                                    <i class="fas fa-crosshairs text-sm"></i>
                                    <span class="text-sm">সেন্টারে আনুন</span>
                                </button>
                            </div>

                            <!-- File Input (Hidden) -->
                            <input type="file" 
                                   id="fileInput" 
                                   accept="image/*" 
                                   style="display: none;">
                        </div>
                    </div>

                    <!-- Mobile Share Section -->
                    <div class="lg:hidden mt-4 md:mt-6">
                        <div class="bg-gradient-to-r from-green-500 to-emerald-600 rounded-xl p-4 text-white">
                            <h3 class="font-bold mb-3 flex items-center gap-2">
                                <i class="fas fa-share-square"></i>
                                দ্রুত শেয়ার করুন
                            </h3>
                            <div class="grid grid-cols-3 gap-2">
                                <button onclick="shareOnFacebook()" class="bg-blue-600 hover:bg-blue-700 py-2 rounded-lg flex flex-col items-center justify-center gap-1">
                                    <i class="fab fa-facebook-f text-lg"></i>
                                    <span class="text-xs">ফেসবুক</span>
                                </button>
                                <button onclick="shareOnWhatsApp()" class="bg-green-600 hover:bg-green-700 py-2 rounded-lg flex flex-col items-center justify-center gap-1">
                                    <i class="fab fa-whatsapp text-lg"></i>
                                    <span class="text-xs">হোয়াটসঅ্যাপ</span>
                                </button>
                                <button onclick="shareOnMessenger()" class="bg-pink-600 hover:bg-pink-700 py-2 rounded-lg flex flex-col items-center justify-center gap-1">
                                    <i class="fab fa-facebook-messenger text-lg"></i>
                                    <span class="text-xs">মেসেঞ্জার</span>
                                </button>
                            </div>
                        </div>
                    </div>
                </div>
            </div>

        </div>
    </div>
</main>

        <!-- Feature Highlights Section -->
<section class="py-8 md:py-12 bg-gradient-to-b from-green-50 to-white dark:from-slate-800 dark:to-slate-900">
    <div class="container mx-auto px-4">
        <div class="grid grid-cols-1 md:grid-cols-3 gap-6 md:gap-8">
                        <!-- Feature 2: Social Share -->
            <div class="bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-lg border border-blue-100 dark:border-slate-700">
                <div class="flex items-center gap-4 mb-4">
                    <div class="w-12 h-12 rounded-full bg-blue-100 dark:bg-blue-900 flex items-center justify-center">
                        <i class="fas fa-share-alt text-blue-600 dark:text-blue-400 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-shadhinata">সোশ্যাল মিডিয়ায় শেয়ার করুন</h3>
                </div>
                <div class="space-y-3">
                    <button onclick="shareOnFacebook()" class="w-full bg-blue-600 hover:bg-blue-700 text-white py-2 px-4 rounded-lg flex items-center justify-center gap-2 transition-all">
                        <i class="fab fa-facebook-f"></i>
                        <span>ফেসবুকে শেয়ার করুন</span>
                    </button>
                    <button onclick="shareOnTwitter()" class="w-full bg-sky-500 hover:bg-sky-600 text-white py-2 px-4 rounded-lg flex items-center justify-center gap-2 transition-all">
                        <i class="fab fa-twitter"></i>
                        <span>টুইটারে শেয়ার করুন</span>
                    </button>
                </div>
            </div>
            
            <!-- Feature 1: Visitor Counter -->
            <div class="bg-white dark:bg-slate-800 rounded-2xl p-6 shadow-lg border border-green-100 dark:border-slate-700">
                <div class="flex items-center gap-4 mb-4">
                    <div class="w-12 h-12 rounded-full bg-green-100 dark:bg-green-900 flex items-center justify-center">
                        <i class="fas fa-users text-green-600 dark:text-green-400 text-xl"></i>
                    </div>
                    <h3 class="text-xl font-shadhinata">টোটাল ভিজিটর</h3>
                </div>
                <div class="text-center">
                    <div id="visitorCounter" class="text-4xl md:text-5xl font-bold text-green-600 dark:text-green-400 mb-2">০</div>
                    <p class="text-sm text-gray-600 dark:text-gray-400">জানুয়ারি ২০২৬ থেকে</p>
                </div>
            </div>


        </div>
    </div>
</section>


    <!-- Footer -->
    <footer class="bg-white dark:bg-slate-900 border-t border-gray-200 dark:border-slate-800 mt-12">
        <div class="container mx-auto px-4 py-8">
            <div class="text-center">
                <!-- Privacy Note -->
                <div class="bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 rounded-lg p-4 mb-6 max-w-2xl mx-auto">
                    <div class="flex items-start gap-3">
                        <i class="fas fa-shield-alt text-green-600 dark:text-green-400 text-xl mt-1"></i>
                        <div class="text-left">
                            <h4 class="font-medium text-green-700 dark:text-green-300 mb-1">গোপনীয়তা নিশ্চিত</h4>
                            <p class="text-sm text-gray-600 dark:text-gray-400">
                                আপনার ছবি শুধু আপনার ডিভাইসে প্রসেস করা হয়। সার্ভারে কোনো ছবি সংরক্ষণ করা হয় না।
                            </p>
                        </div>
                    </div>
                </div>
                
                <div class="text-sm text-gray-500 dark:text-gray-400">
                        <div class="container mx-auto px-6">
        <div class="grid md:grid-cols-4 gap-8">
            <!-- Column 1: About -->
            <div>
                <div class="flex items-center gap-3 mb-6">
                    <div class="w-12 h-12 rounded-full overflow-hidden">
                        <img src="Logo_Big.gif" alt="Logo" class="w-full h-full object-cover">
                    </div>
                    <span class="text-xl font-light text-white font-shadhinata">আনোয়ার ছিদ্দিক চৌধুরী</span>
                </div>
                <p class="text-gray-400 text-sm mb-6">
                    নেতৃত্বে সততা, উন্নয়নে একতা<br>চট্টগ্রাম-৪ আসনের জন্য প্রতিশ্রুতিবদ্ধ
                </p>
            </div>

            <!-- Column 2: Quick Links -->
            <div>
                <h4 class="text-white text-lg font-medium mb-6 font-shadhinata">দ্রুত লিংক</h4>
                <ul class="space-y-3">
                    <li><a href="#about" class="text-gray-400 hover:text-white transition-colors text-sm">পরিচিতি</a></li>
                    <li><a href="#manifesto" class="text-gray-400 hover:text-white transition-colors text-sm">ইশতেহার</a></li>
                    <li><a href="#policy" class="text-gray-400 hover:text-white transition-colors text-sm">পলিসি সামিট ২০২৬</a></li>
                    <li><a href="#gallery" class="text-gray-400 hover:text-white transition-colors text-sm">গ্যালারি</a></li>
                    <li><a href="#videos" class="text-gray-400 hover:text-white transition-colors text-sm">ভিডিও</a></li>
                    <li><a href="#audios" class="text-gray-400 hover:text-white transition-colors text-sm">অডিও</a></li>
                    <li><a href="#contact" class="text-gray-400 hover:text-white transition-colors text-sm">যোগাযোগ</a></li>
                </ul>
            </div>

            <!-- Column 3: Social Media -->
            <div>
                <h4 class="text-white text-lg font-medium mb-6 font-shadhinata">সোশ্যাল মিডিয়া</h4>
                <div class="flex gap-4 mb-6">
                    <a href="https://facebook.com/anwarsiddikoffical" 
                       target="_blank" 
                       class="w-10 h-10 rounded-full bg-blue-600 hover:bg-blue-700 flex items-center justify-center text-white">
                        <i class="fab fa-facebook-f"></i>
                    </a>
                    <a href="#" 
                       target="_blank" 
                       class="w-10 h-10 rounded-full bg-blue-400 hover:bg-blue-500 flex items-center justify-center text-white">
                        <i class="fab fa-twitter"></i>
                    </a>
                    <a href="#" 
                       target="_blank" 
                       class="w-10 h-10 rounded-full bg-pink-600 hover:bg-pink-700 flex items-center justify-center text-white">
                        <i class="fab fa-instagram"></i>
                    </a>
                    <a href="#" 
                       target="_blank" 
                       class="w-10 h-10 rounded-full bg-red-600 hover:bg-red-700 flex items-center justify-center text-white">
                        <i class="fab fa-youtube"></i>
                    </a>
                </div>
            </div>

            <!-- Column 4: Contact Info -->
            <div>
                <h4 class="text-white text-lg font-medium mb-6 font-shadhinata">যোগাযোগ</h4>
                <ul class="space-y-3 text-sm text-gray-400">
                    <li class="flex items-center gap-2">
                        <i class="fas fa-map-marker-alt text-red-500"></i>
                        <span>সীতাকুণ্ড, চট্টগ্রাম</span>
                    </li>
                    <!-- <li class="flex items-center gap-2">
                        <i class="fas fa-envelope text-green-500"></i>
                        <span>info@anwarsiddik.com</span>
                    </li>
                    <li class="flex items-center gap-2">
                        <i class="fas fa-phone text-blue-500"></i>
                        <span>+৮৮০ ১৭০০-০০০০০</span>
                    </li> -->
                </ul>
            </div>
        </div>

        <!-- Copyright -->
        <div class="mt-12 pt-8 border-t border-gray-800 text-center">
            <p class="text-gray-500 text-sm">
                &copy; ২০২৬ মোঃ আনোয়ার ছিদ্দিক চৌধুরী। সকল স্বত্ব সংরক্ষিত।
                <br>
                <span class="text-gray-600 text-xs mt-2 block">
                    ডিজাইন ও ডেভেলপমেন্ট: রাহাত তাহসিন
                </span>
            </p>
        </div>
    </div>

                    <br>
                    <a href="index.html" class="text-[#D3342D] hover:underline mt-2 inline-block">
                        <i class="fas fa-arrow-left mr-2"></i>মূল পেইজে ফিরুন
                    </a>
                </div>
            </div>
        </div>
    </footer>

    <!-- Toast Container -->
    <div id="toast" class="toast"></div>

    <!-- Fabric.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/fabric.js/5.3.0/fabric.min.js"></script>

    <!-- Firebase for visitor counter -->
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.0/firebase-database.js"></script>

<!-- Share Social Media JS -->
<script src="https://cdn.jsdelivr.net/npm/canvas2image@1.0.5/canvas2image.min.js"></script>

    <!-- Main Application Script -->
    <script>
        // Configuration
        const CONFIG = {
            frames: [
                { name: "ফ্রেম ১", url: "frames/frame1.png" },
                { name: "ফ্রেম ২", url: "frames/frame2.png" },
                { name: "ফ্রেম ৩", url: "frames/frame3.png" },
                { name: "ফ্রেম ৪", url: "frames/frame4.png" },
                { name: "ফ্রেম ৫", url: "frames/frame5.png" },
                { name: "ফ্রেম ৬", url: "frames/frame6.png" },
                { name: "ফ্রেম ৭", url: "frames/frame7.png" },
                { name: "ফ্রেম ৮", url: "frames/frame8.png" },
                { name: "ফ্রেম ৯", url: "frames/frame9.png" },
                { name: "ফ্রেম ১০", url: "frames/frame10.png" },
                { name: "ফ্রেম ১১", url: "frames/frame11.png" },
                { name: "ফ্রেম ১২", url: "frames/frame12.png" },
                { name: "ফ্রেম ১৩", url: "frames/frame13.png" },
                { name: "ফ্রেম ১৪", url: "frames/frame14.png" },
                { name: "ফ্রেম ১৫", url: "frames/frame15.png" },
                { name: "ফ্রেম ১৬", url: "frames/frame16.png" },
                { name: "ফ্রেম ১৭", url: "frames/frame17.png" },
                { name: "ফ্রেম ১৮", url: "frames/frame18.png" },
                { name: "ফ্রেম ১৯", url: "frames/frame19.png" },
                { name: "ফ্রেম ২০", url: "frames/frame20.png" }
                
            ],
            exportSize: 2048, // 2048x2048 pixels
            maxFileSize: 20 * 1024 * 1024, // 20MB
        };

        // State Variables
        let fabricCanvas = null;
        let userImageObj = null;
        let frameImageObj = null;
        let currentFrame = null;
        let frameImages = {};
        let isPinching = false;
        let lastTouchDistance = 0;

        // DOM Elements
        const fileInput = document.getElementById('fileInput');
        const framesGrid = document.getElementById('framesGrid');
        const previewCanvas = document.getElementById('previewCanvas');
        const previewContainer = document.getElementById('previewContainer');
        const loadingIndicator = document.getElementById('loadingIndicator');
        const zoomSlider = document.getElementById('zoomSlider');
        const zoomValue = document.getElementById('zoomValue');
        const selectImageBtn = document.getElementById('selectImageBtn');
        const changeImageBtn = document.getElementById('changeImageBtn');
        const downloadBtn = document.getElementById('downloadBtn');
        const toast = document.getElementById('toast');

        // Initialize the application
        function init() {
            // Initialize Fabric.js Canvas
            fabricCanvas = new fabric.Canvas('previewCanvas', {
                width: CONFIG.exportSize,
                height: CONFIG.exportSize,
                backgroundColor: 'transparent',
                selection: false,
                preserveObjectStacking: true,
                renderOnAddRemove: true
            });

            // Make canvas responsive
            function resizeCanvas() {
                if (!fabricCanvas || !previewContainer) return;
                
                const containerWidth = previewContainer.offsetWidth;
                const containerHeight = previewContainer.offsetHeight;
                const scale = Math.min(containerWidth, containerHeight) / CONFIG.exportSize;
                
                const canvasElement = fabricCanvas.getElement();
                if (canvasElement) {
                    canvasElement.style.width = (CONFIG.exportSize * scale) + 'px';
                    canvasElement.style.height = (CONFIG.exportSize * scale) + 'px';
                }
                
                fabricCanvas.renderAll();
            }
            
            setTimeout(resizeCanvas, 100);
            window.addEventListener('resize', resizeCanvas);

            // Load frames
            loadFrames();

            // Event Listeners
            selectImageBtn.addEventListener('click', () => fileInput.click());
            changeImageBtn.addEventListener('click', () => fileInput.click());
            fileInput.addEventListener('change', handleFileSelect);
            zoomSlider.addEventListener('input', handleZoom);
            downloadBtn.addEventListener('click', downloadImage);
            
            // Mouse wheel zoom
            previewCanvas.addEventListener('wheel', handleWheel, { passive: false });
            
            // Touch events for mobile
            previewCanvas.addEventListener('touchstart', handleTouchStart, { passive: false });
            previewCanvas.addEventListener('touchmove', handleTouchMove, { passive: false });
            previewCanvas.addEventListener('touchend', handleTouchEnd);
        }

        // Load all frame images
        async function loadFrames() {
            for (const [index, frame] of CONFIG.frames.entries()) {
                const frameDiv = document.createElement('div');
                frameDiv.className = 'frame-option';
                if (index === 0) {
                    frameDiv.classList.add('selected');
                    currentFrame = frame.url;
                }
                frameDiv.dataset.frame = frame.url;

                try {
                    // You can use direct image loading if frames are in same domain
                    const img = document.createElement('img');
                    img.src = frame.url;
                    img.alt = frame.name;
                    img.style.width = '100%';
                    img.style.height = '100%';
                    img.style.objectFit = 'cover';

                    frameDiv.appendChild(img);
                    frameDiv.addEventListener('click', () => selectFrame(frameDiv, frame.url));
                    
                    // Store for later use
                    frameImages[frame.url] = frame.url;
                    
                    framesGrid.appendChild(frameDiv);
                } catch (error) {
                    console.error('Failed to load frame:', frame.url, error);
                    frameDiv.innerHTML = '<div class="flex items-center justify-center h-full text-gray-500">ফ্রেম লোড করা যায়নি</div>';
                    framesGrid.appendChild(frameDiv);
                }
            }
            
            // Load first frame
            if (currentFrame) {
                updateFrame();
            }
        }

        // Select a frame
        function selectFrame(element, frameUrl) {
            document.querySelectorAll('.frame-option').forEach(el => el.classList.remove('selected'));
            element.classList.add('selected');
            currentFrame = frameUrl;
            updateFrame();
        }

        // Update the frame on canvas
        function updateFrame() {
            if (!frameImages[currentFrame] || !fabricCanvas) return;
            
            // Remove old frame
            if (frameImageObj) {
                fabricCanvas.remove(frameImageObj);
                frameImageObj = null;
            }
            
            // Add new frame
            fabric.Image.fromURL(frameImages[currentFrame], (img) => {
                if (!img) return;
                
                // Scale frame to fit canvas
                const scaleX = CONFIG.exportSize / img.width;
                const scaleY = CONFIG.exportSize / img.height;
                const scale = Math.max(scaleX, scaleY);
                
                img.set({
                    left: CONFIG.exportSize / 2,
                    top: CONFIG.exportSize / 2,
                    originX: 'center',
                    originY: 'center',
                    scaleX: scale,
                    scaleY: scale,
                    selectable: false,
                    evented: false,
                    lockMovementX: true,
                    lockMovementY: true,
                    lockScalingX: true,
                    lockScalingY: true
                });
                
                frameImageObj = img;
                fabricCanvas.add(img);
                
                // Ensure frame is on top
                if (userImageObj) {
                    fabricCanvas.sendToBack(userImageObj);
                }
                
                fabricCanvas.renderAll();
            });
        }

        // Handle file selection
        function handleFileSelect(e) {
            const file = e.target.files[0];
            if (!file) return;

            if (!file.type.match('image.*')) {
                showToast('দয়া করে একটি ছবি ফাইল নির্বাচন করুন।', 'error');
                return;
            }

            if (file.size > CONFIG.maxFileSize) {
                showToast('ফাইল খুব বড়। সর্বোচ্চ ১০ MB অনুমোদিত।', 'error');
                return;
            }

            const reader = new FileReader();
            reader.onload = (event) => loadImage(event.target.result);
            reader.readAsDataURL(file);
        }

        // Load image onto canvas
        function loadImage(imageSrc) {
            fabric.Image.fromURL(imageSrc, (img) => {
                // Center the image
                const centerX = CONFIG.exportSize / 2;
                const centerY = CONFIG.exportSize / 2;
                
                // Calculate scale to fit within frame
                const maxSize = CONFIG.exportSize * 0.8;
                const scale = Math.min(maxSize / img.width, maxSize / img.height);
                
                img.set({
                    left: centerX,
                    top: centerY,
                    originX: 'center',
                    originY: 'center',
                    scaleX: scale,
                    scaleY: scale,
                    selectable: true,
                    evented: true,
                    hasControls: true,
                    hasBorders: true,
                    borderColor: '#D3342D',
                    cornerColor: '#D3342D',
                    cornerSize: 16,
                    transparentCorners: false,
                    lockRotation: true
                });

                // Remove old image
                if (userImageObj) {
                    fabricCanvas.remove(userImageObj);
                }

                userImageObj = img;
                fabricCanvas.add(img);
                
                // Ensure image is below frame
                if (frameImageObj) {
                    fabricCanvas.sendToBack(img);
                }
                
                fabricCanvas.setActiveObject(img);
                fabricCanvas.renderAll();

                // Reset zoom slider
                zoomSlider.value = 100;
                zoomValue.textContent = '100%';

                // Update UI
                selectImageBtn.classList.add('hidden');
                changeImageBtn.classList.remove('hidden');

                // Ensure frame is on top
                if (frameImageObj) {
                    fabricCanvas.bringToFront(frameImageObj);
                }
                
                fabricCanvas.renderAll();
            });
        }

        // Handle mouse wheel zoom
        function handleWheel(e) {
            if (!userImageObj) return;
            e.preventDefault();
            
            const delta = e.deltaY > 0 ? -0.05 : 0.05;
            const currentScale = userImageObj.scaleX;
            const newScale = Math.max(0.1, Math.min(3, currentScale + delta));
            
            // Zoom centered on canvas
            const canvasCenter = {
                x: CONFIG.exportSize / 2,
                y: CONFIG.exportSize / 2
            };
            
            const scaleRatio = newScale / currentScale;
            const imgCenterX = userImageObj.left;
            const imgCenterY = userImageObj.top;
            
            userImageObj.scale(newScale);
            userImageObj.set({
                left: canvasCenter.x - (canvasCenter.x - imgCenterX) * scaleRatio,
                top: canvasCenter.y - (canvasCenter.y - imgCenterY) * scaleRatio
            });
            
            // Update slider
            const zoomPercent = Math.round(newScale * 100);
            zoomSlider.value = zoomPercent;
            zoomValue.textContent = zoomPercent + '%';
            
            fabricCanvas.renderAll();
        }

        // Handle zoom slider
        function handleZoom(e) {
            if (!userImageObj) return;
            
            const sliderValue = parseInt(e.target.value);
            zoomValue.textContent = sliderValue + '%';
            
            const newScale = sliderValue / 100;
            const currentScale = userImageObj.scaleX;
            
            if (currentScale === newScale) return;
            
            // Zoom centered on canvas
            const canvasCenter = {
                x: CONFIG.exportSize / 2,
                y: CONFIG.exportSize / 2
            };
            
            const scaleRatio = newScale / currentScale;
            const imgCenterX = userImageObj.left;
            const imgCenterY = userImageObj.top;
            
            userImageObj.scale(newScale);
            userImageObj.set({
                left: canvasCenter.x - (canvasCenter.x - imgCenterX) * scaleRatio,
                top: canvasCenter.y - (canvasCenter.y - imgCenterY) * scaleRatio
            });
            
            fabricCanvas.renderAll();
        }

        // Touch handlers for pinch zoom
        function handleTouchStart(e) {
            if (e.touches.length === 2) {
                e.preventDefault();
                isPinching = true;
                const touch1 = e.touches[0];
                const touch2 = e.touches[1];
                lastTouchDistance = Math.hypot(
                    touch2.clientX - touch1.clientX,
                    touch2.clientY - touch1.clientY
                );
            }
        }

        function handleTouchMove(e) {
            if (!isPinching || e.touches.length !== 2) return;
            e.preventDefault();
            
            const touch1 = e.touches[0];
            const touch2 = e.touches[1];
            const distance = Math.hypot(
                touch2.clientX - touch1.clientX,
                touch2.clientY - touch1.clientY
            );
            
            if (lastTouchDistance > 0) {
                const scaleChange = distance / lastTouchDistance;
                const currentScale = userImageObj.scaleX;
                const newScale = Math.max(0.1, Math.min(3, currentScale * scaleChange));
                
                // Update zoom
                const canvasCenter = {
                    x: CONFIG.exportSize / 2,
                    y: CONFIG.exportSize / 2
                };
                
                const scaleRatio = newScale / currentScale;
                const imgCenterX = userImageObj.left;
                const imgCenterY = userImageObj.top;
                
                userImageObj.scale(newScale);
                userImageObj.set({
                    left: canvasCenter.x - (canvasCenter.x - imgCenterX) * scaleRatio,
                    top: canvasCenter.y - (canvasCenter.y - imgCenterY) * scaleRatio
                });
                
                // Update slider
                const zoomPercent = Math.round(newScale * 100);
                zoomSlider.value = zoomPercent;
                zoomValue.textContent = zoomPercent + '%';
                
                fabricCanvas.renderAll();
            }
            
            lastTouchDistance = distance;
        }

        function handleTouchEnd() {
            isPinching = false;
            lastTouchDistance = 0;
        }

        // Download the image
        async function downloadImage() {
            if (!userImageObj) {
                showToast('দয়া করে আগে একটি ছবি নির্বাচন করুন।', 'error');
                return;
            }

            showLoading(true);

            try {
                await new Promise(resolve => setTimeout(resolve, 100));
                
                const dataURL = fabricCanvas.toDataURL({
                    format: 'png',
                    quality: 1.0,
                    multiplier: 1
                });
                
                const filename = `daripalla_frame_${Date.now()}.png`;
                
                const a = document.createElement('a');
                a.href = dataURL;
                a.download = filename;
                document.body.appendChild(a);
                a.click();
                document.body.removeChild(a);

                showToast('ফ্রেম ডাউনলোড সম্পন্ন হয়েছে!', 'success');
            } catch (error) {
                console.error('Export error:', error);
                showToast('ডাউনলোড করতে সমস্যা হয়েছে। আবার চেষ্টা করুন।', 'error');
            } finally {
                showLoading(false);
            }
        }

        // Alternative download method:
function downloadImage() {
    const link = document.createElement('a');
    link.download = 'frame.png';
    link.href = fabricCanvas.toDataURL();
    document.body.appendChild(link);
    link.click();
    document.body.removeChild(link);
}

        // UI Helpers
        function showLoading(show) {
            if (show) {
                loadingIndicator.classList.remove('hidden');
            } else {
                loadingIndicator.classList.add('hidden');
            }
        }

        function showToast(message, type = 'info') {
            toast.textContent = message;
            toast.className = 'toast show';
            if (type === 'error') toast.classList.add('error');
            if (type === 'success') toast.classList.add('success');

            setTimeout(() => {
                toast.classList.remove('show');
            }, 3000);
        }

        // Start application
        window.addEventListener('DOMContentLoaded', init);
    </script>
    <script>
        // Mobile-specific functions
function resetImage() {
    if (!userImageObj) return;
    
    const centerX = CONFIG.exportSize / 2;
    const centerY = CONFIG.exportSize / 2;
    const maxSize = CONFIG.exportSize * 0.8;
    const scale = Math.min(maxSize / userImageObj.width, maxSize / userImageObj.height);
    
    userImageObj.set({
        left: centerX,
        top: centerY,
        scaleX: scale,
        scaleY: scale
    });
    
    zoomSlider.value = 100;
    zoomValue.textContent = '100%';
    fabricCanvas.renderAll();
    showToast('ছবি রিসেট করা হয়েছে', 'success');
}

function centerImage() {
    if (!userImageObj) return;
    
    userImageObj.set({
        left: CONFIG.exportSize / 2,
        top: CONFIG.exportSize / 2
    });
    
    fabricCanvas.renderAll();
    showToast('ছবি সেন্টারে আনা হয়েছে', 'success');
}

function shareOnWhatsApp() {
    if (!userImageObj) {
        showToast('দয়া করে প্রথমে একটি ছবি তৈরি করুন', 'error');
        return;
    }
    
    const shareText = 'দাঁড়িপাল্লায় ভোট দিন - ইসলামী শাসনতন্ত্রের জন্য';
    const shareURL = 'https://anwarsiddique.info.bd/frame-generator';
    window.open(`https://wa.me/?text=${encodeURIComponent(shareText + ' ' + shareURL)}`, '_blank');
}

function shareOnMessenger() {
    const shareURL = 'https://anwarsiddique.info.bd/frame-generator';
    window.open(`https://www.facebook.com/dialog/send?link=${encodeURIComponent(shareURL)}&app_id=YOUR_APP_ID`, '_blank');
}
    </script>

    <style>
/* Enhanced Mobile Responsiveness - Fix Canvas Size */
@media (max-width: 640px) {
    /* Canvas container - reduce size for mobile */
    #previewContainer {
        width: 90vw !important;
        height: 90vw !important;
        max-width: 350px !important;
        max-height: 350px !important;
        margin: 0 auto 1.5rem auto !important;
    }
    
    /* Adjust canvas itself */
    .canvas-container {
        width: 100% !important;
        height: 100% !important;
    }
    
    /* Reduce surrounding padding */
    main {
        padding-top: 4rem !important;
        padding-bottom: 2rem !important;
    }
    
    /* Header size adjustment */
    .text-center h1 {
        font-size: 1.5rem !important;
        margin-bottom: 0.75rem !important;
    }
    
    .text-center p {
        font-size: 0.875rem !important;
        margin-bottom: 1.5rem !important;
    }
    
    /* Frame options grid - smaller for mobile */
    .frame-option {
        width: 65px !important;
        height: 65px !important;
        min-width: 65px !important;
    }
    
    /* Reduce padding in cards */
    .bg-white.dark\\:bg-slate-800.rounded-xl {
        padding: 1rem !important;
    }
    
    /* Button adjustments */
    button, .frame-option, input[type="range"] {
        min-height: 40px !important;
    }
    
    /* Reduce gap between columns */
    .grid.grid-cols-1.lg\\:grid-cols-3 {
        gap: 0.75rem !important;
    }
    
    /* Feature section padding */
    section.py-8.md\\:py-12 {
        padding-top: 2rem !important;
        padding-bottom: 2rem !important;
    }
    
    /* Hide mobile touch hints when not needed */
    #previewContainer .lg\\:hidden.absolute.bottom-3 {
        display: none;
    }
}

/* Tablet adjustments */
@media (min-width: 641px) and (max-width: 1024px) {
    #previewContainer {
        width: 70vw !important;
        height: 70vw !important;
        max-width: 450px !important;
        max-height: 450px !important;
        margin: 0 auto 2rem auto !important;
    }
    
    .frame-option {
        width: 80px !important;
        height: 80px !important;
        min-width: 80px !important;
    }
}

/* Improve canvas rendering on mobile */
@media (max-width: 1024px) {
    canvas {
        touch-action: manipulation;
    }
    
    /* Prevent text selection on touch */
    .no-select {
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    
    /* Smooth scrolling for frame options */
    #framesGrid {
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
    }
}

/* Fix for very small screens */
@media (max-width: 360px) {
    #previewContainer {
        width: 85vw !important;
        height: 85vw !important;
        max-width: 300px !important;
        max-height: 300px !important;
    }
    
    .frame-option {
        width: 60px !important;
        height: 60px !important;
        min-width: 60px !important;
    }
    
    .text-center h1 {
        font-size: 1.25rem !important;
    }
}
</style>

<style>
/* Enhanced Mobile Responsiveness - Fix Canvas Size */
@media (max-width: 640px) {
    /* Canvas container - reduce size for mobile */
    #previewContainer {
        width: 90vw !important;
        height: 90vw !important;
        max-width: 350px !important;
        max-height: 350px !important;
        margin: 0 auto 1.5rem auto !important;
    }
    
    /* Adjust canvas itself */
    .canvas-container {
        width: 100% !important;
        height: 100% !important;
    }
    
    /* Reduce surrounding padding */
    main {
        padding-top: 4rem !important;
        padding-bottom: 2rem !important;
    }
    
    /* Header size adjustment */
    .text-center h1 {
        font-size: 1.5rem !important;
        margin-bottom: 0.75rem !important;
    }
    
    .text-center p {
        font-size: 0.875rem !important;
        margin-bottom: 1.5rem !important;
    }
    
    /* Frame options grid - smaller for mobile */
    .frame-option {
        width: 65px !important;
        height: 65px !important;
        min-width: 65px !important;
    }
    
    /* Reduce padding in cards */
    .bg-white.dark\\:bg-slate-800.rounded-xl {
        padding: 1rem !important;
    }
    
    /* Button adjustments */
    button, .frame-option, input[type="range"] {
        min-height: 40px !important;
    }
    
    /* Reduce gap between columns */
    .grid.grid-cols-1.lg\\:grid-cols-3 {
        gap: 0.75rem !important;
    }
    
    /* Feature section padding */
    section.py-8.md\\:py-12 {
        padding-top: 2rem !important;
        padding-bottom: 2rem !important;
    }
    
    /* Hide mobile touch hints when not needed */
    #previewContainer .lg\\:hidden.absolute.bottom-3 {
        display: none;
    }
}

/* Tablet adjustments */
@media (min-width: 641px) and (max-width: 1024px) {
    #previewContainer {
        width: 70vw !important;
        height: 70vw !important;
        max-width: 450px !important;
        max-height: 450px !important;
        margin: 0 auto 2rem auto !important;
    }
    
    .frame-option {
        width: 80px !important;
        height: 80px !important;
        min-width: 80px !important;
    }
}

/* Improve canvas rendering on mobile */
@media (max-width: 1024px) {
    canvas {
        touch-action: manipulation;
    }
    
    /* Prevent text selection on touch */
    .no-select {
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
    }
    
    /* Smooth scrolling for frame options */
    #framesGrid {
        -webkit-overflow-scrolling: touch;
        scroll-behavior: smooth;
    }
}

/* Fix for very small screens */
@media (max-width: 360px) {
    #previewContainer {
        width: 85vw !important;
        height: 85vw !important;
        max-width: 300px !important;
        max-height: 300px !important;
    }
    
    .frame-option {
        width: 60px !important;
        height: 60px !important;
        min-width: 60px !important;
    }
    
    .text-center h1 {
        font-size: 1.25rem !important;
    }
}

/* Mobile Canvas Size Fix */
@media (max-width: 640px) {
    .canvas-container {
        width: 90vw !important;
        height: 90vw !important;
        max-width: 350px !important;
        max-height: 350px !important;
        margin: 0 auto !important;
    }
    
    #previewCanvas {
        width: 100% !important;
        height: 100% !important;
    }
}
</style>
</body>
</html>
